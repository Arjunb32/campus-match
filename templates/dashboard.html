<!DOCTYPE html>
<html>
<head>
    <title>Find a Match</title>
    <h1>

        <div style="text-align: center; margin-top: 10px;">
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            {% for message in messages %}
              <div style="background: #d4edda; color: #155724; padding: 10px; margin: 10px auto; width: 80%; border-radius: 5px; border: 1px solid #c3e6cb;">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
    </div>
    </h1>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; padding: 20px; }
        
        /* The Grid Layout */
        .grid { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; }
        
        /* The "Anonymous" Card */
        .card { 
            background: white; 
            width: 320px; 
            border-radius: 15px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            overflow: hidden;
            transition: transform 0.2s;
        }
        .card:hover { transform: translateY(-5px); }

        /* The Header (Code Number only) */
        .card-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        .card-header h2 { margin: 0; font-size: 24px; }
        .card-header span { font-size: 14px; opacity: 0.8; }

        /* The Details */
        .card-body { padding: 20px; color: #333; }
        .data-row { 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 10px; 
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }
        .label { font-weight: bold; color: #666; font-size: 0.9em; }
        .value { font-weight: 600; color: #222; }

        /* The Bio Box */
        .bio-box {
            background: #f9f9f9;
            padding: 10px;
            border-radius: 8px;
            font-style: italic;
            color: #555;
            margin: 15px 0;
            font-size: 0.9em;
        }

        /* Buttons */
        .btn {
            display: block;
            width: 100%;
            background-color: #ff4757;
            color: white;
            padding: 12px;
            border: none;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }
        .btn:hover { background-color: #ff6b81; }
    </style>
</head>
<body>

    <div style="text-align: center; margin-bottom: 30px;">
        <h1>Campus Blind Match</h1>
        <p>Your Identity: <strong>Student #{{ session['user_id'] }}</strong> | <a href="/logout">Logout</a></p>
    </div>

    <div class="grid">
        {% for person in matches %}
        <div class="card">
            
            <div class="card-header">
                <h2>Student #{{ person.user_id }}</h2>
                <span>Verified Student</span>
            </div>

            <div class="card-body">
                <div class="data-row">
                    <span class="label">Course:</span>
                    <span class="value">{{ person.year_of_study }} - {{ person.department }}</span>
                </div>

                <div class="data-row">
                    <span class="label">Gender:</span>
                    <span class="value">{{ person.gender }}</span>
                </div>

                <div class="data-row">
                    <span class="label">Orientation:</span>
                    <span class="value">{{ person.orientation }}</span>
                </div>

                <div class="data-row">
                    <span class="label">Looking For:</span>
                    <span class="value" style="color: #2ed573;">{{ person.relationship_goal }}</span>
                </div>

                <div class="bio-box">
                    "{{ person.bio }}"
                </div>

                <form action="/send_interest/{{ person.user_id }}" method="POST">
                    <button type="submit" class="btn">‚ù§Ô∏è Send Interest</button>
                </form>
            </div>
        </div>
        {% else %}
        <div style="text-align: center; width: 100%; margin-top: 50px;">
            <h3>No matches found yet.</h3>
            <p>Invite your friends to sign up so you can find them here!</p>
            
            <div style="background: white; padding: 20px; display: inline-block; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <input type="text" value="http://192.168.29.215:5000/register" id="inviteLink" ... > style="padding: 8px; width: 250px; border: 1px solid #ccc; border-radius: 5px;" readonly>
                <button onclick="copyLink()" style="padding: 9px 15px; background-color: #2ecc71; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                    üìã Copy Link
                </button>
            </div>
            
            <p id="copyMessage" style="color: green; font-size: 0.9em; margin-top: 10px; display: none;">Link copied to clipboard!</p>
        </div>
        {% endfor %}
    </div>
<script>
        function copyLink() {
            // Get the text field
            var copyText = document.getElementById("inviteLink");

            // Select the text field
            copyText.select();
            copyText.setSelectionRange(0, 99999); // For mobile devices

            // Copy the text inside the text field
            navigator.clipboard.writeText(copyText.value);

            // Show a success message
            var msg = document.getElementById("copyMessage");
            msg.style.display = "block";
            
            // Hide message after 3 seconds
            setTimeout(function(){ msg.style.display = "none"; }, 3000);
        }
    </script>
</body>
</html>
</body>
</html>